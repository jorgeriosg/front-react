{"version":3,"sources":["main.js"],"names":["window","document","mainHandlers","src","origin","console","log","responsive","createIframe","div","createElement","ifrm","setAttribute","classList","add","appendChild","body","basicStylesSetUp","onmessage","e","data","test","undefined","mensaje","msg","styleIframe","responsiveFunc","classStyle","iframeClasslist","getElementById","remove","head","css","style","type","createTextNode","iframe","contentWindow","postMessage","setTimeout","styleIframeMessage","outerWidth","CognitiveAssistantMain","onresize","onready"],"mappings":"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","file":"main.js","sourcesContent":["(function(window, document) {\n    \"use strict\";\n    class mainHandlers {\n        constructor() {}\n\n        init(src, origin) {\n            console.log('src:: ', src);\n            console.log('origin:: ', origin);\n            this.src = src;\n            this.origin = origin;\n            this.responsive = \"\";\n            this.createIframe();\n        }\n\n        createIframe() {\n            var div = document.createElement(\"div\"),\n                ifrm = document.createElement(\"iframe\");\n\n            ifrm.setAttribute(\"id\", \"ifrm-assitant\");\n            ifrm.classList.add(\"iframe-cognitive-assistant-container\");\n            ifrm.classList.add(\"active\");\n            ifrm.classList.add(\"notification\");\n            ifrm.setAttribute(\"allow\", \"geolocation *;\");\n            ifrm.setAttribute(\"allow\", \"microphone *;\");\n            ifrm.setAttribute(\"src\", this.src);\n            ifrm.setAttribute(\"data-origin\", this.origin);\n            div.appendChild(ifrm);\n            document.body.appendChild(div);\n            this.basicStylesSetUp();\n            window.onmessage = e => {\n                if (e.data.test !== undefined) {\n                    const mensaje = e.data.test[0].msg;\n                    this.styleIframe(mensaje);\n                } else if (e.data.responsiveFunc !== undefined) {\n                    this.responsiveFunc();\n                }\n            };\n        }\n\n        styleIframe(classStyle) {\n            const iframeClasslist = document.getElementById(\"ifrm-assitant\")\n                .classList;\n            switch (classStyle) {\n                case \"assistant\":\n                    iframeClasslist.add(classStyle);\n                    iframeClasslist.remove(\"notification\");\n                    iframeClasslist.remove(\"launcher\");\n                    iframeClasslist.remove(\"minimized\");\n                    break;\n                case \"notification\":\n                    iframeClasslist.add(classStyle);\n                    iframeClasslist.remove(\"assistant\");\n                    iframeClasslist.remove(\"launcher\");\n                    iframeClasslist.remove(\"minimized\");\n                    break;\n                case \"launcher\":\n                    iframeClasslist.add(classStyle);\n                    iframeClasslist.remove(\"assistant\");\n                    iframeClasslist.remove(\"notification\");\n                    iframeClasslist.remove(\"minimized\");\n                    break;\n                case \"minimized\":\n                    iframeClasslist.add(classStyle);\n                    iframeClasslist.remove(\"assistant\");\n                    iframeClasslist.remove(\"notification\");\n                    iframeClasslist.remove(\"launcher\");\n                    break;\n                default:\n                    break;\n            }\n        }\n\n        basicStylesSetUp() {\n            const head = document.head;\n            let css = \"\",\n                style = document.createElement(\"style\");\n\n            css +=\n                \".iframe-cognitive-assistant-container {overflow: hidden;border: none;position: fixed;bottom: 10px;right: 10px;background-color: transparent;opacity: 0;transform: translate3d(0,100%,0);transition: transform opacity height 350ms ease;pointer-events: none;transition-timing-function: cubic-bezier(0.56, 1.19, 0.2, 1.05);z-index: 99999999;border-radius: 5px;}\";\n            css +=\n                \".iframe-cognitive-assistant-container.active {opacity: 1;transform: translate3d(0,0,0);pointer-events: auto;}\";\n            css +=\n                \".iframe-cognitive-assistant-container.notification{ height: 100%;width: 100%;max-width: 365px;box-shadow: none;right: 0;bottom: 0; }\";\n            css +=\n                \".iframe-cognitive-assistant-container.assistant{ height: 100vh;width: 100%;max-width: 401px;right: 0px;bottom: 0px; }\";\n            css +=\n                \".iframe-cognitive-assistant-container.minimized{ height: 100px;width: 100%;max-width: 100px;right: 10px;bottom: 0px;}\";\n            css += \".cognitive-iframe {height: 100%;width: 100%;border: 0 none;}\";\n            css +=\n                \"@media screen and (max-width: 767px){ .iframe-cognitive-assistant-container.assistant{ border-radius: 0px; height: 100% ; top: 0; left: 0; right: 0; bottom: 0; max-width:100%; } \";\n            css +=\n                \".iframe-cognitive-assistant-container.minimized{max-width: none; bottom:0; left:0; right:0;} }\";\n            css +=\n                \"@media screen and (min-width: 1000px) and (max-width: 1200px){ .iframe-cognitive-assistant-container.assistant{ width: 45% }  }\";\n\n            style.type = \"text/css\";\n\n            style.appendChild(document.createTextNode(css));\n            head.appendChild(style);\n        }\n\n        styleIframeMessage() {\n            const iframe = document.getElementById(\"ifrm-assitant\");\n            const contentWindow = iframe ? iframe.contentWindow : null;\n            if (contentWindow) {\n                contentWindow.postMessage({ responsive: this.responsive }, \"*\");\n            } else {\n                setTimeout(() => {\n                    this.styleIframeMessage();\n                }, 600);\n            }\n        }\n\n        responsiveFunc() {\n            if (window.outerWidth <= 767) {\n                if (this.responsive !== \"mobile\") {\n                    this.responsive = \"mobile\";\n                    this.styleIframeMessage();\n                }\n            } else {\n                if (this.responsive !== \"desktop\") {\n                    this.responsive = \"desktop\";\n                    this.styleIframeMessage();\n                }\n            }\n        }\n    }\n    window.CognitiveAssistantMain = new mainHandlers();\n    window.onresize = () => {\n        window.CognitiveAssistantMain.responsiveFunc();\n    };\n\n    document.onready;\n})(window, document);"]}
